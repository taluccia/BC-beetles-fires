---
title: "GEE-Sampled Points"
author: "Anna Talucci"
date: "6/5/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Library
```{r include=FALSE}


library(dplyr)

library(ggplot2)
```



# Data
```{r}
endata = read.csv("../data/GEE-Sampled/2021-06-05_EnSampledValues.csv", header=TRUE, sep = ",", strip.white = TRUE)
twdata = read.csv("../data/GEE-Sampled/2021-06-05_TWSampledValues.csv", header=TRUE, sep = ",", strip.white = TRUE)
chdata = read.csv("../data/GEE-Sampled/2021-06-05_ChSampledValues.csv", header=TRUE, sep = ",", strip.white = TRUE)
```


# Data Inspection
```{r}
summary(endata)
```

```{r}
summary(twdata)
```
```{r}
summary(chdata)
```

#  Visualize Data

## Entiako
```{r}
ggplot(endata, aes(x=ndviprefire)) + geom_histogram() 
```


```{r}
ggplot(endata, aes(x=elevation)) + geom_histogram() 
```



```{r}
ggplot(endata, aes(x=fwi)) + geom_histogram() 
```


```{r}
ggplot(endata, aes(x=dndmi)) + geom_histogram() 
```



```{r}
ggplot(endata, aes(x=rdnbr)) + geom_histogram() 
```

## Tweeds
```{r}
ggplot(twdata, aes(x=ndviprefire)) + geom_histogram() 
```


```{r}
ggplot(twdata, aes(x=elevation)) + geom_histogram() 
```



```{r}
ggplot(twdata, aes(x=fwi)) + geom_histogram() 
```


```{r}
ggplot(twdata, aes(x=dndmi)) + geom_histogram() 
```



```{r}
ggplot(twdata, aes(x=rdnbr)) + geom_histogram() 
```


## Chelaslie
```{r}
ggplot(chdata, aes(x=ndviprefire)) + geom_histogram() 
```


```{r}
ggplot(chdata, aes(x=elevation)) + geom_histogram() 
```



```{r}
ggplot(chdata, aes(x=fwi)) + geom_histogram() 
```


```{r}
ggplot(chdata, aes(x=dndmi)) + geom_histogram() 
```



```{r}
ggplot(chdata, aes(x=rdnbr)) + geom_histogram() 
```

# Combine data

```{r}

endata1 = endata %>% 
  dplyr::select(ASPTR:rdnbr) %>%
  rename(org_rdnbr=EN_rdnbr) %>%
  mutate(FireYr = 2012)
endata1
```

```{r}

twdata1 = twdata %>% 
  dplyr::select(ASPTR:rdnbr) %>%
  rename(org_rdnbr=TW_rdnbr) %>%
  mutate(FireYr = 2013)
twdata1
```


```{r}

chdata1 = chdata %>% 
  dplyr::select(ASPTR:rdnbr) %>%
  rename(org_rdnbr=CH_rdnbr) %>%
  mutate(FireYr = 2014)
chdata1
```


```{r}
df = bind_rows(endata1, twdata1, chdata1)
```


```{r}
summary(df)
```

```{r}
df
```

## Visualize all

```{r}
ggplot(df, aes(x=ndviprefire)) + geom_histogram() 
```


```{r}
ggplot(df, aes(x=elevation)) + geom_histogram() 
```



```{r}
ggplot(df, aes(x=fwi)) + geom_histogram() 
```


```{r}
ggplot(df, aes(x=dndmi)) + geom_histogram() 
```



```{r}
ggplot(df, aes(x=rdnbr)) + geom_histogram() 
```


# Filter

```{r}
df1 = df  %>% 
  filter(rdnbr %in% (-500:2000) )

df1
```



# Add variables

```{r}
df2 = df1 %>%
  mutate(fwi_lohi = ifelse(fwi<= 29, 1, 2)) %>%
  mutate(rdnbr_class = ifelse(rdnbr<= 641, 0, 1))

df2

```


# Create Training Data
## Randomly sample 60%  of data



```{r}
set.seed(101)
train.data = df2 %>% sample_frac(0.6)
train.data
```

```{r}
summary(train.data)
```
```{r}
train.data %>% 
  count(rdnbr_class) 
```

```{r}
train.data %>% 
  filter(fwi_lohi == "1") %>%
  count(rdnbr_class) 
```

```{r}
train.data %>% 
  filter(fwi_lohi == "2") %>%
  count(rdnbr_class) 
```


```{r}

  write.csv(train.data, '../outputs/TrainingData/TrainData.csv', row.names = FALSE)
```














